{"ast":null,"code":"import { ref } from 'vue';\nimport { ElMessage } from 'element-plus';\nimport axios from 'axios';\nexport default {\n  name: 'Login',\n  setup() {\n    const loginForm = ref({\n      username: '',\n      password: ''\n    });\n    const handleLogin = async () => {\n      try {\n        const response = await axios.post('http://localhost:8080/eShop/login', {\n          username: loginForm.value.username,\n          password: loginForm.value.password\n        });\n        const {\n          code,\n          msg,\n          data\n        } = response.data;\n        if (code === 200 && msg === '成功') {\n          ElMessage.success('登录成功');\n          // 根据data内容判断用户类型\n          if (data === '商家') {\n            window.location.href = '/merchant-dashboard';\n          } else if (data === '顾客') {\n            window.location.href = '/customer-dashboard';\n          }\n        } else {\n          ElMessage.error(data || '登录失败');\n        }\n      } catch (error) {\n        ElMessage.error('请求失败，请稍后重试');\n      }\n    };\n    return {\n      loginForm,\n      handleLogin\n    };\n  }\n};","map":{"version":3,"names":["ref","ElMessage","axios","name","setup","loginForm","username","password","handleLogin","response","post","value","code","msg","data","success","window","location","href","error"],"sources":["E:\\Vue\\jsproject\\shop\\src\\views\\Login.vue"],"sourcesContent":["<template>\r\n    <div class=\"login-container\">\r\n      <el-card class=\"login-card\">\r\n        <h2 class=\"login-title\">登录</h2>\r\n        <el-form :model=\"loginForm\" @submit.native.prevent=\"handleLogin\">\r\n          <el-form-item>\r\n            <el-input v-model=\"loginForm.username\" placeholder=\"用户名\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-input\r\n              v-model=\"loginForm.password\"\r\n              type=\"password\"\r\n              placeholder=\"密码\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"handleLogin\">登录</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-card>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { ref } from 'vue';\r\n  import { ElMessage } from 'element-plus';\r\n  import axios from 'axios';\r\n  \r\n  export default {\r\n    name: 'Login',\r\n    setup() {\r\n      const loginForm = ref({\r\n        username: '',\r\n        password: '',\r\n      });\r\n  \r\n      const handleLogin = async () => {\r\n        try {\r\n          const response = await axios.post('http://localhost:8080/eShop/login', {\r\n            username: loginForm.value.username,\r\n            password: loginForm.value.password,\r\n          });\r\n  \r\n          const { code, msg, data } = response.data;\r\n  \r\n          if (code === 200 && msg === '成功') {\r\n            ElMessage.success('登录成功');\r\n            // 根据data内容判断用户类型\r\n            if (data === '商家') {\r\n              window.location.href = '/merchant-dashboard';\r\n            } else if (data === '顾客') {\r\n              window.location.href = '/customer-dashboard';\r\n            }\r\n          } else {\r\n            ElMessage.error(data || '登录失败');\r\n          }\r\n        } catch (error) {\r\n          ElMessage.error('请求失败，请稍后重试');\r\n        }\r\n      };\r\n  \r\n      return {\r\n        loginForm,\r\n        handleLogin,\r\n      };\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  \r\n  <style scoped>\r\n  .login-container {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 100vh;\r\n    background-color: #f5f5f5;\r\n  }\r\n  \r\n  .login-card {\r\n    width: 400px;\r\n    padding: 20px;\r\n  }\r\n  \r\n  .login-title {\r\n    text-align: center;\r\n    margin-bottom: 20px;\r\n  }\r\n  </style>\r\n  "],"mappings":"AAwBE,SAASA,GAAE,QAAS,KAAK;AACzB,SAASC,SAAQ,QAAS,cAAc;AACxC,OAAOC,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAI,EAAE,OAAO;EACbC,KAAKA,CAAA,EAAG;IACN,MAAMC,SAAQ,GAAIL,GAAG,CAAC;MACpBM,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE;IACZ,CAAC,CAAC;IAEF,MAAMC,WAAU,GAAI,MAAAA,CAAA,KAAY;MAC9B,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMP,KAAK,CAACQ,IAAI,CAAC,mCAAmC,EAAE;UACrEJ,QAAQ,EAAED,SAAS,CAACM,KAAK,CAACL,QAAQ;UAClCC,QAAQ,EAAEF,SAAS,CAACM,KAAK,CAACJ;QAC5B,CAAC,CAAC;QAEF,MAAM;UAAEK,IAAI;UAAEC,GAAG;UAAEC;QAAK,IAAIL,QAAQ,CAACK,IAAI;QAEzC,IAAIF,IAAG,KAAM,GAAE,IAAKC,GAAE,KAAM,IAAI,EAAE;UAChCZ,SAAS,CAACc,OAAO,CAAC,MAAM,CAAC;UACzB;UACA,IAAID,IAAG,KAAM,IAAI,EAAE;YACjBE,MAAM,CAACC,QAAQ,CAACC,IAAG,GAAI,qBAAqB;UAC9C,OAAO,IAAIJ,IAAG,KAAM,IAAI,EAAE;YACxBE,MAAM,CAACC,QAAQ,CAACC,IAAG,GAAI,qBAAqB;UAC9C;QACF,OAAO;UACLjB,SAAS,CAACkB,KAAK,CAACL,IAAG,IAAK,MAAM,CAAC;QACjC;MACF,EAAE,OAAOK,KAAK,EAAE;QACdlB,SAAS,CAACkB,KAAK,CAAC,YAAY,CAAC;MAC/B;IACF,CAAC;IAED,OAAO;MACLd,SAAS;MACTG;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}